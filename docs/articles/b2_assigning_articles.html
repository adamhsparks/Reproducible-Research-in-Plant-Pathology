<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Second Round of Assigning Articles to Evaluators • Reproducibility in Plant Pathology</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Second Round of Assigning Articles to Evaluators">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Reproducibility in Plant Pathology</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/a_reproducibility_criteria.html">Criteria for Evaluating Reproducibility</a>
    </li>
    <li>
      <a href="../articles/b1_assigning_articles.html">Original Round of Assigning Articles to Evaluators</a>
    </li>
    <li>
      <a href="../articles/b2_assigning_articles.html">Second Round of Assigning Articles to Evaluators</a>
    </li>
    <li>
      <a href="../articles/c_retrieving_references.html">Retrieving References Using DOI</a>
    </li>
    <li>
      <a href="../articles/d_generate_final_bib.html">Generate Final .bib File of References Reviewed</a>
    </li>
    <li>
      <a href="../articles/e_analysis.html">Analysis</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/openplantpathology/Reproducibility_in_Plant_Pathology">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="b2_assigning_articles_files/header-attrs-2.1/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Second Round of Assigning Articles to Evaluators</h1>
                        <h4 class="author">Adam H Sparks</h4>
            
            <h4 class="date">2020-02-29</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/openplantpathology/Reproducibility_in_Plant_Pathology/blob/master/vignettes/b2_assigning_articles.Rmd"><code>vignettes/b2_assigning_articles.Rmd</code></a></small>
      <div class="hidden name"><code>b2_assigning_articles.Rmd</code></div>

    </div>

    
    
<div id="creating-a-sample-of-articles" class="section level2">
<h2 class="hasAnchor">
<a href="#creating-a-sample-of-articles" class="anchor"></a>Creating a sample of articles</h2>
<p>As a second round to bring the analysis up-to-date, we elected to sample 100 articles from the same 21 journals for 2017-2018.</p>
<p>Aside from the different years, the journals remain the same and process as described previously.</p>
</div>
<div id="step-1" class="section level2">
<h2 class="hasAnchor">
<a href="#step-1" class="anchor"></a>Step 1</h2>
<div id="r-setup" class="section level3">
<h3 class="hasAnchor">
<a href="#r-setup" class="anchor"></a>R setup</h3>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(dplyr)</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(readr)</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(bib2df)</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(googlesheets)</span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(stringr)</span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(Reproducibility.in.Plant.Pathology)</span>
<span id="cb1-7"><a href="#cb1-7"></a></span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="kw"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="dv">23</span>)</span>
<span id="cb1-9"><a href="#cb1-9"></a></span>
<span id="cb1-10"><a href="#cb1-10"></a><span class="co"># For printing tibble in total</span></span>
<span id="cb1-11"><a href="#cb1-11"></a><span class="kw"><a href="https://rdrr.io/r/base/options.html">options</a></span>(<span class="dt">tibble.print_max =</span> <span class="dv">21</span>, <span class="dt">tibble.print_min =</span> <span class="dv">21</span>)</span></code></pre></div>
</div>
<div id="create-list-of-journals" class="section level3">
<h3 class="hasAnchor">
<a href="#create-list-of-journals" class="anchor"></a>Create list of journals</h3>
<p>We hand-picked a list of 21 journals that we felt represented plant pathology research. In this step, we will create a <code>tibble</code> in R of these journals, assigning them a number so that we can randomise them.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>journal_list &lt;-<span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/reexports.html">tibble</a></span>(</span>
<span id="cb2-2"><a href="#cb2-2"></a>  <span class="kw"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">21</span>),</span>
<span id="cb2-3"><a href="#cb2-3"></a>  <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Australasian Plant Pathology"</span>,</span>
<span id="cb2-4"><a href="#cb2-4"></a>    <span class="st">"Canadian Journal of Plant Pathology"</span>,</span>
<span id="cb2-5"><a href="#cb2-5"></a>    <span class="st">"Crop Protection"</span>,</span>
<span id="cb2-6"><a href="#cb2-6"></a>    <span class="st">"European Journal of Plant Pathology"</span>,</span>
<span id="cb2-7"><a href="#cb2-7"></a>    <span class="st">"Forest Pathology"</span>,</span>
<span id="cb2-8"><a href="#cb2-8"></a>    <span class="st">"Journal of General Plant Pathology"</span>,</span>
<span id="cb2-9"><a href="#cb2-9"></a>    <span class="st">"Journal of Phytopathology"</span>,</span>
<span id="cb2-10"><a href="#cb2-10"></a>    <span class="st">"Journal of Plant Pathology"</span>,</span>
<span id="cb2-11"><a href="#cb2-11"></a>    <span class="st">"Virology Journal (Plant Viruses Section)"</span>,</span>
<span id="cb2-12"><a href="#cb2-12"></a>    <span class="st">"Molecular Plant-Microbe Interactions"</span>,</span>
<span id="cb2-13"><a href="#cb2-13"></a>    <span class="st">"Molecular Plant Pathology"</span>,</span>
<span id="cb2-14"><a href="#cb2-14"></a>    <span class="st">"Nematology"</span>,</span>
<span id="cb2-15"><a href="#cb2-15"></a>    <span class="st">"Physiological and Molecular Plant Pathology"</span>,</span>
<span id="cb2-16"><a href="#cb2-16"></a>    <span class="st">"Phytoparasitica"</span>,</span>
<span id="cb2-17"><a href="#cb2-17"></a>    <span class="st">"Phytopathologia Mediterranea"</span>,</span>
<span id="cb2-18"><a href="#cb2-18"></a>    <span class="st">"Phytopathology"</span>,</span>
<span id="cb2-19"><a href="#cb2-19"></a>    <span class="st">"Plant Disease"</span>,</span>
<span id="cb2-20"><a href="#cb2-20"></a>    <span class="st">"Plant Health Progress"</span>,</span>
<span id="cb2-21"><a href="#cb2-21"></a>    <span class="st">"Plant Pathology"</span>,</span>
<span id="cb2-22"><a href="#cb2-22"></a>    <span class="st">"Revista Mexicana de Fitopatología"</span>,</span>
<span id="cb2-23"><a href="#cb2-23"></a>    <span class="st">"Tropical Plant Pathology"</span>))</span>
<span id="cb2-24"><a href="#cb2-24"></a></span>
<span id="cb2-25"><a href="#cb2-25"></a><span class="kw"><a href="https://rdrr.io/r/base/names.html">names</a></span>(journal_list) &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"number"</span>, <span class="st">"journal"</span>)</span></code></pre></div>
</div>
<div id="create-list-of-evaluators-for-second-round-of-reviews" class="section level3">
<h3 class="hasAnchor">
<a href="#create-list-of-evaluators-for-second-round-of-reviews" class="anchor"></a>Create list of evaluators for second round of reviews</h3>
<p>These articles were added at a later date to look for any possible trends in the plant pathology literature being published. The same journal titles were sampled for 2017-2018 using the same protocols as the original set of 200 articles for 100 articles over two years.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>assignees &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Emerson"</span>, <span class="st">"Kaique"</span>), <span class="dv">50</span>)</span></code></pre></div>
</div>
<div id="create-randomised-list" class="section level3">
<h3 class="hasAnchor">
<a href="#create-randomised-list" class="anchor"></a>Create randomised list</h3>
<p>Now we will create a randomised list of journal articles to assign to each of the four authors for this paper.</p>
<div id="create-a-randomised-list-of-the-journals" class="section level4">
<h4 class="hasAnchor">
<a href="#create-a-randomised-list-of-the-journals" class="anchor"></a>Create a randomised list of the journals</h4>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>journals &lt;-<span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/reexports.html">tibble</a></span>(<span class="kw"><a href="https://dplyr.tidyverse.org/reference/sample.html">sample</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">21</span>, <span class="dv">100</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>))</span>
<span id="cb4-2"><a href="#cb4-2"></a></span>
<span id="cb4-3"><a href="#cb4-3"></a><span class="kw"><a href="https://rdrr.io/r/base/names.html">names</a></span>(journals) &lt;-<span class="st"> "number"</span></span>
<span id="cb4-4"><a href="#cb4-4"></a></span>
<span id="cb4-5"><a href="#cb4-5"></a>journals &lt;-<span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/join.html">left_join</a></span>(journals, journal_list, <span class="st">"number"</span>)</span></code></pre></div>
</div>
<div id="randomly-select-articles" class="section level4">
<h4 class="hasAnchor">
<a href="#randomly-select-articles" class="anchor"></a>Randomly select articles</h4>
<p>Generate a random list of years between 2012 and 2016 and a random list of start pages between 1 and 150 since some journals start numbering at 1 with every issue. Then bind the columns of the randomised list of journals with the randomised years and page start numbers. This then assumes that there is no temporal effect, <em>i.e.</em>, the time of year an article is published does not affect whether or not it is reproducible.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>year &lt;-<span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/sample.html">sample</a></span>(<span class="dv">2017</span><span class="op">:</span><span class="dv">2018</span>, <span class="dv">100</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>)</span>
<span id="cb5-2"><a href="#cb5-2"></a></span>
<span id="cb5-3"><a href="#cb5-3"></a>contains_page &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/sample.html">sample.int</a></span>(<span class="dv">150</span>, <span class="dv">100</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>)</span>
<span id="cb5-4"><a href="#cb5-4"></a></span>
<span id="cb5-5"><a href="#cb5-5"></a>journals &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span>(journals[, <span class="dv">-1</span>], year, contains_page, assignees)</span>
<span id="cb5-6"><a href="#cb5-6"></a></span>
<span id="cb5-7"><a href="#cb5-7"></a>journals &lt;-<span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span>(<span class="dt">.data =</span> journals, assignees, journal, year, contains_page)</span></code></pre></div>
</div>
<div id="check-the-number-of-articles-per-journal" class="section level4">
<h4 class="hasAnchor">
<a href="#check-the-number-of-articles-per-journal" class="anchor"></a>Check the number of articles per journal</h4>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>journals <span class="op">%&gt;%</span></span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(journal) <span class="op">%&gt;%</span></span>
<span id="cb6-3"><a href="#cb6-3"></a><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/tally.html">tally</a></span>(<span class="dt">sort =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<pre><code>## # A tibble: 21 x 2
##    journal                                         n
##    &lt;chr&gt;                                       &lt;int&gt;
##  1 Plant Pathology                                10
##  2 Journal of Phytopathology                       7
##  3 Physiological and Molecular Plant Pathology     7
##  4 Canadian Journal of Plant Pathology             6
##  5 Molecular Plant-Microbe Interactions            6
##  6 Phytoparasitica                                 6
##  7 Plant Disease                                   6
##  8 Crop Protection                                 5
##  9 Forest Pathology                                5
## 10 Journal of General Plant Pathology              5
## 11 Virology Journal (Plant Viruses Section)        5
## 12 Australasian Plant Pathology                    4
## 13 Journal of Plant Pathology                      4
## 14 Nematology                                      4
## 15 Plant Health Progress                           4
## 16 European Journal of Plant Pathology             3
## 17 Molecular Plant Pathology                       3
## 18 Phytopathology                                  3
## 19 Tropical Plant Pathology                        3
## 20 Phytopathologia Mediterranea                    2
## 21 Revista Mexicana de Fitopatología               2</code></pre>
<p>Once this is done, the articles are manually examined for suitability. Reference articles or off-topic articles are not included. Notes are provided regarding these cases in <code>assigned_article_notes</code>. If the selected page number/article was not suitable, the next sequential article was selected manually.</p>
</div>
</div>
<div id="add-empty-columns-for-evaluations" class="section level3">
<h3 class="hasAnchor">
<a href="#add-empty-columns-for-evaluations" class="anchor"></a>Add empty columns for evaluations</h3>
<p>A variety of information will be collected with each article to be used in the analysis later. It is easiest to enter this using a spreadsheet application, so we will add on the columns for what information we want to collect and save the table as a csv for manual editing.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>to_record &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(</span>
<span id="cb8-2"><a href="#cb8-2"></a>  <span class="st">"doi"</span>,</span>
<span id="cb8-3"><a href="#cb8-3"></a>  <span class="st">"IF_5year"</span>,</span>
<span id="cb8-4"><a href="#cb8-4"></a>  <span class="st">"country"</span>,</span>
<span id="cb8-5"><a href="#cb8-5"></a>  <span class="st">"open"</span>,</span>
<span id="cb8-6"><a href="#cb8-6"></a>  <span class="st">"repro_inst"</span>,</span>
<span id="cb8-7"><a href="#cb8-7"></a>  <span class="st">"iss_per_year"</span>,</span>
<span id="cb8-8"><a href="#cb8-8"></a>  <span class="st">"art_class"</span>,</span>
<span id="cb8-9"><a href="#cb8-9"></a>  <span class="st">"supl_mats"</span>,</span>
<span id="cb8-10"><a href="#cb8-10"></a>  <span class="st">"comp_mthds_avail"</span>,</span>
<span id="cb8-11"><a href="#cb8-11"></a>  <span class="st">"software_avail"</span>,</span>
<span id="cb8-12"><a href="#cb8-12"></a>  <span class="st">"software_cite"</span>,</span>
<span id="cb8-13"><a href="#cb8-13"></a>  <span class="st">"analysis_auto"</span>,</span>
<span id="cb8-14"><a href="#cb8-14"></a>  <span class="st">"data_avail"</span>,</span>
<span id="cb8-15"><a href="#cb8-15"></a>  <span class="st">"data_annot"</span>,</span>
<span id="cb8-16"><a href="#cb8-16"></a>  <span class="st">"data_tidy"</span>,</span>
<span id="cb8-17"><a href="#cb8-17"></a>  <span class="st">"reproducibility_score"</span></span>
<span id="cb8-18"><a href="#cb8-18"></a>  )</span>
<span id="cb8-19"><a href="#cb8-19"></a>  journals[to_record] &lt;-<span class="st"> ""</span></span>
<span id="cb8-20"><a href="#cb8-20"></a>  </span>
<span id="cb8-21"><a href="#cb8-21"></a>  journals &lt;-<span class="st"> </span></span>
<span id="cb8-22"><a href="#cb8-22"></a><span class="st">    </span>journals <span class="op">%&gt;%</span></span>
<span id="cb8-23"><a href="#cb8-23"></a><span class="st">    </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(assignees) <span class="op">%&gt;%</span></span>
<span id="cb8-24"><a href="#cb8-24"></a><span class="st">    </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/reexports.html">as_tibble</a></span>()</span></code></pre></div>
</div>
<div id="write-to-google-sheets" class="section level3">
<h3 class="hasAnchor">
<a href="#write-to-google-sheets" class="anchor"></a>Write to Google Sheets</h3>
<p>We decided to use Google Sheets so that we could concurrently edit the file more easily. Once we’re done filling in our evaluations, we will import the data back to R. Jenny Bryan has created a handy package, <em>googlesheets</em> that we use here. <em>Note that this must be run interactively for <code><a href="https://rdrr.io/pkg/googlesheets/man/gs_new.html">gs_new()</a></code> to work. Knitting this .Rmd file will not generate any gsheets, it must be done in an interactive R session.</em></p>
<p>Create a Google Sheets workbook to hold worksheets for this project. This first sheet will serve as a template and is thus named “template”.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="co"># Give googlesheets permission to access spreadsheets and Google Drive</span></span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="kw"><a href="https://rdrr.io/pkg/googlesheets/man/gs_auth.html">gs_auth</a></span>()</span>
<span id="cb9-3"><a href="#cb9-3"></a></span>
<span id="cb9-4"><a href="#cb9-4"></a><span class="co"># create Google Sheet for concurrent edits, first sheet: article notes template</span></span>
<span id="cb9-5"><a href="#cb9-5"></a><span class="kw"><a href="https://rdrr.io/pkg/googlesheets/man/gs_new.html">gs_new</a></span>(</span>
<span id="cb9-6"><a href="#cb9-6"></a>  <span class="st">"article_notes_2017-2018"</span>,</span>
<span id="cb9-7"><a href="#cb9-7"></a>  <span class="dt">ws_title =</span> <span class="st">"template"</span>,</span>
<span id="cb9-8"><a href="#cb9-8"></a>  <span class="dt">input =</span> journals,</span>
<span id="cb9-9"><a href="#cb9-9"></a>  <span class="dt">trim =</span> <span class="ot">TRUE</span>,</span>
<span id="cb9-10"><a href="#cb9-10"></a>  <span class="dt">verbose =</span> <span class="ot">FALSE</span></span>
<span id="cb9-11"><a href="#cb9-11"></a>  )</span></code></pre></div>
</div>
</div>
<div id="step-2" class="section level2">
<h2 class="hasAnchor">
<a href="#step-2" class="anchor"></a>Step 2</h2>
<div id="add-article-dois" class="section level3">
<h3 class="hasAnchor">
<a href="#add-article-dois" class="anchor"></a>Add article DOI’s</h3>
<p>This step is completed in gsheets, Adam looked up articles and added notes and DOIs to a gsheet, “article_notes_2017-2018” which will be imported to R in the next step.</p>
</div>
</div>
<div id="step-3" class="section level2">
<h2 class="hasAnchor">
<a href="#step-3" class="anchor"></a>Step 3</h2>
<div id="generate-a-bibliography-file-to-use-with-the-paper" class="section level3">
<h3 class="hasAnchor">
<a href="#generate-a-bibliography-file-to-use-with-the-paper" class="anchor"></a>Generate a bibliography file to use with the paper</h3>
<p>Using the DOIs in this file, we can retrieve the BibTex citations for those articles that provide a DOI. Note that not all of the selected articles have a DOI, so we’ll have to manually generate those entries, or fetch them from the journals’ website later.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a>article_notes &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/googlesheets/man/googlesheet.html">gs_title</a></span>(<span class="st">"article_notes_2017-2018"</span>)</span>
<span id="cb10-2"><a href="#cb10-2"></a></span>
<span id="cb10-3"><a href="#cb10-3"></a>notes &lt;-<span class="st"> </span></span>
<span id="cb10-4"><a href="#cb10-4"></a><span class="st">  </span>article_notes <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb10-5"><a href="#cb10-5"></a><span class="st">    </span><span class="kw"><a href="https://rdrr.io/pkg/googlesheets/man/gs_read.html">gs_read</a></span>(<span class="dt">ws =</span> <span class="st">"article_notes"</span>)</span>
<span id="cb10-6"><a href="#cb10-6"></a>  </span>
<span id="cb10-7"><a href="#cb10-7"></a><span class="co"># format DOIs to all be uniform, lower-case</span></span>
<span id="cb10-8"><a href="#cb10-8"></a>notes<span class="op">$</span>doi &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/chartr.html">tolower</a></span>(notes<span class="op">$</span>doi)</span>
<span id="cb10-9"><a href="#cb10-9"></a></span>
<span id="cb10-10"><a href="#cb10-10"></a><span class="co"># convert encodings for text with accents</span></span>
<span id="cb10-11"><a href="#cb10-11"></a>notes<span class="op">$</span>journal &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/iconv.html">iconv</a></span>(notes<span class="op">$</span>journal, <span class="st">"latin1"</span>, <span class="st">"UTF-8"</span>) </span>
<span id="cb10-12"><a href="#cb10-12"></a></span>
<span id="cb10-13"><a href="#cb10-13"></a><span class="co"># get bib references from the DOI (that exist)</span></span>
<span id="cb10-14"><a href="#cb10-14"></a>bib &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span>(notes<span class="op">$</span>doi, doi2bib))</span></code></pre></div>
<p>The <em>Journal of Plant Pathology</em> does not supply valid bib entries via the DOI. So we need to clean them up.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="co"># locations of Journal of "Plant Pathology"" entries in bib object</span></span>
<span id="cb11-2"><a href="#cb11-2"></a>clean_pp &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/grep.html">grep</a></span>(<span class="st">"journal=</span><span class="ch">\\</span><span class="st">{Journal of Plant Pathology</span><span class="ch">\\</span><span class="st">}"</span>, bib)</span>
<span id="cb11-3"><a href="#cb11-3"></a></span>
<span id="cb11-4"><a href="#cb11-4"></a><span class="co"># create a dataset of just those bib entries</span></span>
<span id="cb11-5"><a href="#cb11-5"></a>bib_clean_pp &lt;-<span class="st"> </span>bib[clean_pp]</span>
<span id="cb11-6"><a href="#cb11-6"></a></span>
<span id="cb11-7"><a href="#cb11-7"></a><span class="co"># function to clean the entries</span></span>
<span id="cb11-8"><a href="#cb11-8"></a>clean_articles_pp &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="cb11-9"><a href="#cb11-9"></a>  title_loc &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/grep.html">gregexpr</a></span>(<span class="dt">pattern =</span> <span class="st">"title"</span>, x))</span>
<span id="cb11-10"><a href="#cb11-10"></a>  y &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/substr.html">substr</a></span>(x, <span class="dt">start =</span> title_loc[<span class="dv">1</span>], <span class="dt">stop =</span> <span class="kw"><a href="https://rdrr.io/r/base/nchar.html">nchar</a></span>(x))</span>
<span id="cb11-11"><a href="#cb11-11"></a>  y &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"@article{jpp,</span><span class="ch">\n\t</span><span class="st">"</span> , y)</span>
<span id="cb11-12"><a href="#cb11-12"></a>  y &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span>(<span class="st">"}, "</span>, <span class="st">"},</span><span class="ch">\n\t</span><span class="st">"</span>, y)</span>
<span id="cb11-13"><a href="#cb11-13"></a>  y &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span>(<span class="st">"="</span>, <span class="st">" = "</span>, y)</span>
<span id="cb11-14"><a href="#cb11-14"></a>  y &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span>(<span class="st">"}}</span><span class="ch">\n</span><span class="st">"</span>, <span class="st">"}</span><span class="ch">\n</span><span class="st">}"</span>, y)</span>
<span id="cb11-15"><a href="#cb11-15"></a>}</span>
<span id="cb11-16"><a href="#cb11-16"></a></span>
<span id="cb11-17"><a href="#cb11-17"></a><span class="co"># apply function and clean the bib entries</span></span>
<span id="cb11-18"><a href="#cb11-18"></a>cleaned_pp &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span>(bib_clean_pp, clean_articles_pp))</span>
<span id="cb11-19"><a href="#cb11-19"></a></span>
<span id="cb11-20"><a href="#cb11-20"></a><span class="co"># remove the incorrect entries for Journal of Plant Pathology</span></span>
<span id="cb11-21"><a href="#cb11-21"></a>bib &lt;-<span class="st"> </span>bib[<span class="op">-</span>clean_pp]</span></code></pre></div>
<p><em>Phytopathologia Mediterranea</em> also provides some malformed bib entries. The cite entries are malformed and <code>&lt;em&gt; &lt;/em&gt;</code> is used rather than the proper <code>\textit{}</code> for a BibTeX file.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a>clean_pm &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/grep.html">grep</a></span>(<span class="st">"journal=</span><span class="ch">\\</span><span class="st">{Phytopathologia Mediterranea</span><span class="ch">\\</span><span class="st">}"</span>, bib)</span>
<span id="cb12-2"><a href="#cb12-2"></a>bib_clean_pm &lt;-<span class="st"> </span>bib[clean_pm]</span>
<span id="cb12-3"><a href="#cb12-3"></a>clean_articles_pm &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="cb12-4"><a href="#cb12-4"></a>  x &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span>(<span class="st">" @article</span><span class="ch">\\</span><span class="st">{[[:print:]]+, title=</span><span class="ch">\\</span><span class="st">{"</span>, <span class="st">"@article</span><span class="ch">\\</span><span class="st">{PM, title = </span><span class="ch">\\</span><span class="st">{"</span>, x)</span>
<span id="cb12-5"><a href="#cb12-5"></a>  x &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span>(<span class="st">"&lt;em&gt;"</span>, <span class="st">"</span><span class="ch">\\\t</span><span class="st">extit</span><span class="ch">\\</span><span class="st">{"</span>, x)</span>
<span id="cb12-6"><a href="#cb12-6"></a>  x &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span>(<span class="st">"&lt;/em&gt;"</span>, <span class="st">"}"</span>, x)</span>
<span id="cb12-7"><a href="#cb12-7"></a>  }</span>
<span id="cb12-8"><a href="#cb12-8"></a></span>
<span id="cb12-9"><a href="#cb12-9"></a><span class="co"># apply function and clean the bib entries</span></span>
<span id="cb12-10"><a href="#cb12-10"></a>cleaned_pm &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span>(bib_clean_pm, clean_articles_pm))</span>
<span id="cb12-11"><a href="#cb12-11"></a>bib &lt;-<span class="st"> </span>bib[<span class="op">-</span>clean_pm]</span></code></pre></div>
<p>The larger list of bib objects has some items that are supposedly invalid DOIs. In this step we remove them and clean up the list. They’ll be added back to the database when we merge the notes at the end.</p>
<p>Also there are duplicates in the list somehow. Use <code><a href="https://rdrr.io/r/base/unique.html">unique()</a></code> to clean the list up.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>bib &lt;-<span class="st"> </span>bib[bib <span class="op">!=</span><span class="st"> "Invalid DOI"</span>]</span>
<span id="cb13-2"><a href="#cb13-2"></a></span>
<span id="cb13-3"><a href="#cb13-3"></a>bib &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/unique.html">unique</a></span>(bib)</span></code></pre></div>
<p>Next export the items as files to disk as .bib files to be cleaned using JabRef. This will automatically assign unique cite keys and fix some issues with characters in the bib file. Open the file in JabRef and click “yes” when prompted to regarding the cite keys.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a><span class="co"># clean up any existing files since we're appending</span></span>
<span id="cb14-2"><a href="#cb14-2"></a><span class="kw"><a href="https://rdrr.io/r/base/unlink.html">unlink</a></span>(<span class="st">"~/tmp/bib_new_article_notes.bib"</span>)</span>
<span id="cb14-3"><a href="#cb14-3"></a></span>
<span id="cb14-4"><a href="#cb14-4"></a><span class="co"># write files to a local directory and clean up with JabRef</span></span>
<span id="cb14-5"><a href="#cb14-5"></a><span class="kw"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span>(bib),</span>
<span id="cb14-6"><a href="#cb14-6"></a>       write, <span class="st">"~/tmp/bib_new_article_notes.bib"</span>,</span>
<span id="cb14-7"><a href="#cb14-7"></a>       <span class="dt">append =</span> <span class="ot">TRUE</span>)</span>
<span id="cb14-8"><a href="#cb14-8"></a><span class="kw"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span>(cleaned_pp),</span>
<span id="cb14-9"><a href="#cb14-9"></a>       write, <span class="st">"~/tmp/bib_new_article_notes.bib"</span>,</span>
<span id="cb14-10"><a href="#cb14-10"></a>       <span class="dt">append =</span> <span class="ot">TRUE</span>)</span>
<span id="cb14-11"><a href="#cb14-11"></a><span class="kw"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span>(cleaned_pm),</span>
<span id="cb14-12"><a href="#cb14-12"></a>       write, <span class="st">"~/tmp/bib_new_article_notes.bib"</span>,</span>
<span id="cb14-13"><a href="#cb14-13"></a>       <span class="dt">append =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<p><em>Important</em> Open resulting files in <code>~/tmp</code> directory in JabRef, create new keys and resave. JabRef will generate unique keys and fix any inconsistencies that may exist from the DOI search.</p>
</div>
<div id="export-google-sheets" class="section level3">
<h3 class="hasAnchor">
<a href="#export-google-sheets" class="anchor"></a>Export Google Sheets</h3>
<p>In this last bit, import the BibTeX file back into R and export to a tab in the Google Sheets for collaborative edits.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="co"># import both the Journal of Plant Pathology (cleaned_bib) and article_notes.bib</span></span>
<span id="cb15-2"><a href="#cb15-2"></a>bib &lt;-<span class="st"> </span><span class="kw"><a href="https://docs.ropensci.org/bib2df/reference/bib2df.html">bib2df</a></span>(<span class="st">"~/tmp/bib_new_article_notes.bib"</span>)</span>
<span id="cb15-3"><a href="#cb15-3"></a><span class="kw"><a href="https://rdrr.io/r/base/names.html">names</a></span>(bib) &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/chartr.html">tolower</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/names.html">names</a></span>(bib))</span>
<span id="cb15-4"><a href="#cb15-4"></a></span>
<span id="cb15-5"><a href="#cb15-5"></a><span class="co"># join notes with bibliographic data</span></span>
<span id="cb15-6"><a href="#cb15-6"></a>bib_df &lt;-<span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/join.html">left_join</a></span>(notes, bib)</span>
<span id="cb15-7"><a href="#cb15-7"></a>bib_df &lt;-<span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span>(bib_df, new_assignees)</span>
<span id="cb15-8"><a href="#cb15-8"></a></span>
<span id="cb15-9"><a href="#cb15-9"></a><span class="co"># create Google Sheet for concurrent edits</span></span>
<span id="cb15-10"><a href="#cb15-10"></a>new_article_notes &lt;-</span>
<span id="cb15-11"><a href="#cb15-11"></a><span class="st">  </span>new_article_notes <span class="op">%&gt;%</span></span>
<span id="cb15-12"><a href="#cb15-12"></a><span class="st">  </span><span class="kw"><a href="https://rdrr.io/pkg/googlesheets/man/gs_ws_new.html">gs_ws_new</a></span>(</span>
<span id="cb15-13"><a href="#cb15-13"></a>    <span class="dt">ws_title =</span> <span class="st">"new_article_evaluations"</span>,</span>
<span id="cb15-14"><a href="#cb15-14"></a>    <span class="dt">input =</span> bib_df,</span>
<span id="cb15-15"><a href="#cb15-15"></a>    <span class="dt">trim =</span> <span class="ot">TRUE</span>,</span>
<span id="cb15-16"><a href="#cb15-16"></a>    <span class="dt">verbose =</span> <span class="ot">FALSE</span></span>
<span id="cb15-17"><a href="#cb15-17"></a>  )</span>
<span id="cb15-18"><a href="#cb15-18"></a></span>
<span id="cb15-19"><a href="#cb15-19"></a><span class="co"># clean up files to build R package properly with no NOTES</span></span>
<span id="cb15-20"><a href="#cb15-20"></a><span class="kw"><a href="https://rdrr.io/r/base/unlink.html">unlink</a></span>(<span class="st">".httr-oauth"</span>)</span></code></pre></div>
</div>
<div id="last-steps" class="section level3">
<h3 class="hasAnchor">
<a href="#last-steps" class="anchor"></a>Last steps</h3>
<p>The last few steps are completed outside of R in Google Docs, manually adding the missing information to the spreadsheet and the new_assigneess adding their evaluations of their respective articles.</p>
<p>The Google Sheets can be found here: <a href="https://docs.google.com/spreadsheets/d/19gXobV4oPZeWZiQJAPNIrmqpfGQtpapXWcSxaXRw1-M/edit#gid=1699540381" class="uri">https://docs.google.com/spreadsheets/d/19gXobV4oPZeWZiQJAPNIrmqpfGQtpapXWcSxaXRw1-M/edit#gid=1699540381</a>.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#creating-a-sample-of-articles">Creating a sample of articles</a></li>
      <li><a href="#step-1">Step 1</a></li>
      <li><a href="#step-2">Step 2</a></li>
      <li><a href="#step-3">Step 3</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Adam H. Sparks, Emerson M. Del Ponte, Sydney Everhart, Zachary S. L. Foster, Niklaus J. Grünwald.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
